# Матрица трассировки NFR

## Обзор
Данный документ содержит матрицу трассировки между Security NFR и пользовательскими историями/задачами.

## Матрица трассировки NFR ↔ Stories/Tasks

| NFR ID | Story/Task | Описание | Приоритет | Release/Milestone | Статус |
|--------|------------|----------|-----------|-------------------|--------|
| NFR-01 | AUTH-12 | Реализация Argon2id хэширования паролей | High | 2025.10 | В работе |
| NFR-01 | AUTH-13 | Unit-тесты для проверки параметров хэширования | High | 2025.10 | Планируется |
| NFR-02 | API-08 | Стандартизация формата ошибок RFC7807 | Medium | 2025.11 | Планируется |
| NFR-02 | API-09 | Маскирование PII в ошибках | Medium | 2025.11 | Планируется |
| NFR-03 | PERF-07 | Нагрузочное тестирование /login endpoint | High | 2025.10 | Планируется |
| NFR-03 | PERF-08 | Настройка мониторинга производительности | High | 2025.10 | Планируется |
| NFR-04 | SEC-15 | Интеграция SCA сканирования в CI/CD | High | 2025.10 | В работе |
| NFR-04 | SEC-16 | Настройка автоматических алертов на уязвимости | High | 2025.10 | Планируется |
| NFR-05 | PLAT-05 | Настройка автоматической ротации секретов | Medium | 2025.12 | Планируется |
| NFR-05 | PLAT-06 | Интеграция с Vault/KMS | Medium | 2025.12 | Планируется |
| NFR-06 | MON-03 | Настройка SIEM для security событий | High | 2025.11 | Планируется |
| NFR-06 | MON-04 | Создание дашбордов для security мониторинга | High | 2025.11 | Планируется |
| NFR-07 | API-10 | Настройка Rate Limiting в API Gateway | High | 2025.10 | Планируется |
| NFR-07 | API-11 | Мониторинг и алерты по rate limiting | High | 2025.10 | Планируется |
| NFR-08 | INFRA-07 | Настройка TLS 1.3+ для всех сервисов | High | 2025.10 | Планируется |
| NFR-08 | INFRA-08 | SSL Labs тестирование в CI/CD | High | 2025.10 | Планируется |
| NFR-09 | AUTH-14 | Настройка TTL для JWT токенов | Medium | 2025.11 | Планируется |
| NFR-09 | AUTH-15 | Реализация refresh token механизма | Medium | 2025.11 | Планируется |
| NFR-10 | SEC-17 | Настройка ML-детекции аномалий | High | 2025.12 | Планируется |
| NFR-10 | SEC-18 | Создание системы алертов для аномалий | High | 2025.12 | Планируется |

## Детальная трассировка по компонентам

### Auth Service
- **NFR-01**: Хранение паролей → AUTH-12, AUTH-13
- **NFR-03**: Производительность логина → PERF-07, PERF-08
- **NFR-09**: Время жизни токенов → AUTH-14, AUTH-15

### API Gateway
- **NFR-02**: Ошибки RFC7807 → API-08, API-09
- **NFR-07**: Rate Limiting → API-10, API-11

### Build Pipeline
- **NFR-04**: Уязвимости зависимостей → SEC-15, SEC-16

### Platform/Infrastructure
- **NFR-05**: Ротация секретов → PLAT-05, PLAT-06
- **NFR-08**: HTTPS/TLS → INFRA-07, INFRA-08

### Security Operations
- **NFR-06**: Логирование безопасности → MON-03, MON-04
- **NFR-10**: Мониторинг аномалий → SEC-17, SEC-18

## Приоритизация по релизам

### Release 2025.10 (Критический)
- NFR-01: Хранение паролей (High)
- NFR-03: Производительность логина (High)
- NFR-04: Уязвимости зависимостей (High)
- NFR-07: Rate Limiting (High)
- NFR-08: HTTPS/TLS (High)

### Release 2025.11 (Важный)
- NFR-02: Ошибки RFC7807 (Medium)
- NFR-06: Логирование безопасности (High)
- NFR-09: Время жизни токенов (Medium)

### Release 2025.12 (Долгосрочный)
- NFR-05: Ротация секретов (Medium)
- NFR-10: Мониторинг аномалий (High)

## Метрики выполнения

| Компонент | Всего NFR | Выполнено | В работе | Планируется | % Выполнения |
|-----------|-----------|-----------|----------|-------------|--------------|
| Auth Service | 3 | 0 | 1 | 2 | 33% |
| API Gateway | 2 | 0 | 0 | 2 | 0% |
| Build Pipeline | 1 | 0 | 1 | 0 | 0% |
| Platform | 2 | 0 | 0 | 2 | 0% |
| Security Ops | 2 | 0 | 0 | 2 | 0% |
| **Итого** | **10** | **0** | **2** | **8** | **20%** |

## Следующие шаги

1. **Немедленно**: Завершить AUTH-12 (Argon2id) и SEC-15 (SCA сканирование)
2. **В течение недели**: Начать работу над NFR-03, NFR-07, NFR-08
3. **В течение месяца**: Планирование и начало работы над NFR-02, NFR-06, NFR-09
4. **Долгосрочно**: Подготовка к реализации NFR-05 и NFR-10
